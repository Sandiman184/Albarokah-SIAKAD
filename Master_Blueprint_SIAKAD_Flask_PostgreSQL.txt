MASTER BLUEPRINT PEMBANGUNAN SISTEM WEBSITE PROFIL + SIAKAD + E-RAPORT
FLASK + POSTGRESQL
==============================================================

DOKUMEN INI ADALAH PATOKAN UTAMA PEMBANGUNAN SISTEM. TIDAK ADA OPSI
ALTERNATIF. SEMUA DESAIN BERSIFAT FINAL.

============================================================== I.
SPESIFIKASI TEKNOLOGI FINAL
==============================================================

Backend Framework : Flask (App Factory Pattern) Database : PostgreSQL
ORM : Flask-SQLAlchemy Migration : Flask-Migrate (Alembic)
Authentication : Flask-Login Form Handling : Flask-WTF (CSRF Protection)
Password Hashing : Argon2 PDF Engine : WeasyPrint Web Server : Nginx
(Reverse Proxy) App Server : Gunicorn Operating System : Ubuntu Server
22.04 LTS Python Version : 3.10+

============================================================== II.
ARSITEKTUR FINAL SISTEM
==============================================================

Server Tunggal (10GB RAM, 64GB SSD)

Terdapat 2 aplikasi terpisah:

1.  Website Profil (Publik)
2.  SIAKAD + E-Raport (Internal Login Only)

Masing-masing berjalan sebagai service terpisah:

-   web_profile.service → Gunicorn port 8001
-   siakad.service → Gunicorn port 8002

1 PostgreSQL instance 2 Database terpisah:

-   web_profile_db
-   siakad_db

Nginx reverse proxy mengatur routing domain.

Database hanya listen di localhost (tidak expose publik).

============================================================== III.
STRUKTUR PROYEK WAJIB (SIAKAD)
==============================================================

siakad_app/ │ ├── app/ │ ├── init.py │ ├── models/ │ ├── routes/ │ ├──
services/ │ ├── templates/ │ ├── static/ │ └── decorators.py │ ├──
migrations/ ├── config.py ├── wsgi.py ├── run.py └── requirements.txt

Struktur ini tidak boleh diubah selama pengembangan.

============================================================== IV.
DATABASE DESIGN FINAL (POSTGRESQL)
==============================================================

ROLE SYSTEM: ADMIN USTADZ WALI_KELAS WALI_SANTRI

TABEL UTAMA:

users - id (PK) - username - password_hash - role - created_at

santri - id (PK) - nis - nama - jenis_kelamin - tanggal_lahir - alamat -
status - jenjang - kelas_id (FK) - wali_user_id (FK)

pengajar - id (PK) - nama - no_hp - alamat - user_id (FK)

kelas - id (PK) - nama_kelas - jenjang - wali_kelas_id (FK)

mata_pelajaran - id (PK) - nama_mapel - jenjang

nilai - id (PK) - santri_id (FK) - mapel_id (FK) - semester -
nilai_harian - nilai_uts - nilai_uas - nilai_praktik

tahfidz - id (PK) - santri_id (FK) - nama_surat - ayat - kelancaran -
tajwid - tanggal_setor

absensi - id (PK) - santri_id (FK) - tanggal - status

keuangan - id (PK) - santri_id (FK) - bulan - tahun - jumlah - status -
tanggal_bayar

============================================================== V. URUTAN
PEMBANGUNAN (FIX ROADMAP)
==============================================================

TAHAP 1 – FOUNDATION - Setup Ubuntu - Install PostgreSQL - Buat
database - Setup virtual environment - Install dependency - Setup App
Factory - Setup migration

TAHAP 2 – AUTHENTICATION & ROLE - Login system - Password hashing
Argon2 - Role decorator - Session management

TAHAP 3 – MASTER DATA - CRUD Santri - CRUD Pengajar - CRUD Kelas - CRUD
Mata Pelajaran

TAHAP 4 – MODUL AKADEMIK - Input nilai - Input tahfidz - Input absensi -
Rekap kelas

TAHAP 5 – E-RAPORT - Rekap semester - Generate PDF - Catatan wali
kelas - Status kenaikan kelas

TAHAP 6 – MODUL KEUANGAN - Tagihan SPP - Riwayat pembayaran - Status
lunas

TAHAP 7 – SECURITY HARDENING - UFW aktif - Fail2ban aktif - Disable root
SSH - HTTPS wajib - Rate limiting login - Backup otomatis harian

============================================================== VI.
STANDAR KEAMANAN WAJIB
==============================================================

-   Tidak boleh expose database
-   Semua route wajib login_required
-   Semua akses sensitif wajib role_required
-   Gunakan ORM, tidak boleh raw SQL
-   CSRF aktif di semua form
-   Secret key via environment variable
-   Backup terenkripsi
-   Log monitoring aktif

============================================================== VII.
WEBSITE PROFIL (SETELAH CORE SELESAI)
==============================================================

Fitur: - Landing Page - Profil Pesantren - Program Pendidikan - PPDB
Online - Berita - Galeri - Kontak

Website tidak menyimpan data akademik.

============================================================== VIII.
TARGET SISTEM AKHIR
==============================================================

-   Stabil untuk 1000+ santri
-   Aman untuk data anak & keuangan
-   Modular dan mudah dikembangkan
-   Siap audit
-   Siap integrasi API di masa depan

==============================================================
KESIMPULAN FINAL
==============================================================

Pembangunan dimulai dari SIAKAD sebagai core system. Website profil
dibangun setelah sistem akademik stabil.

Arsitektur ini adalah patokan tetap. Perubahan besar hanya boleh
dilakukan sebelum tahap implementasi dimulai.

Dokumen ini menjadi referensi utama selama pembangunan proyek.
